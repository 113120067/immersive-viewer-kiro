<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zeabur èª¿è©¦é é¢</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h2>Zeabur éƒ¨ç½²èª¿è©¦</h2>
        
        <div class="alert alert-info">
            <h5>æ¸¬è©¦æ­¥é©Ÿï¼š</h5>
            <ol>
                <li>æ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…· (F12)</li>
                <li>åˆ‡æ›åˆ° Console æ¨™ç±¤</li>
                <li>è¼¸å…¥å–®å­—ä¸¦é»æ“ŠæŒ‰éˆ•</li>
                <li>æŸ¥çœ‹æ§åˆ¶å°è¼¸å‡º</li>
            </ol>
        </div>
        
        <form id="testForm">
            <div class="mb-3">
                <label class="form-label">è¼¸å…¥è‹±æ–‡å–®å­—ï¼š</label>
                <input type="text" id="testInput" class="form-control" placeholder="ä¾‹å¦‚ï¼šdog" value="dog" required>
            </div>
            <button type="submit" class="btn btn-primary">ğŸ¨ æ¸¬è©¦ç”Ÿæˆ</button>
        </form>
        
        <div id="status" class="mt-3"></div>
        <div id="result" class="mt-3"></div>
        <img id="testImage" class="mt-3" style="max-width: 300px; display: none; border: 2px solid #28a745; border-radius: 10px;">
    </div>

    <script>
        console.log('ğŸš€ èª¿è©¦é é¢è¼‰å…¥å®Œæˆ');
        
        document.getElementById('testForm').addEventListener('submit', function(e) {
            e.preventDefault();
            console.log('ğŸ“ è¡¨å–®æäº¤äº‹ä»¶è§¸ç™¼');
            
            const input = document.getElementById('testInput').value.trim();
            const status = document.getElementById('status');
            const result = document.getElementById('result');
            const img = document.getElementById('testImage');
            
            console.log('ğŸ“¥ è¼¸å…¥å€¼:', input);
            
            if (!input) {
                status.innerHTML = '<div class="alert alert-warning">è«‹è¼¸å…¥å–®å­—</div>';
                return;
            }
            
            status.innerHTML = '<div class="alert alert-info">ğŸ¨ æ­£åœ¨ç”Ÿæˆåœ–ç‰‡...</div>';
            result.innerHTML = '';
            img.style.display = 'none';
            
            try {
                // ç”Ÿæˆæç¤ºè©
                const prompt = `cute cartoon ${input}, children's book illustration style, colorful, simple, friendly, white background`;
                console.log('ğŸ“ ç”Ÿæˆçš„æç¤ºè©:', prompt);
                
                // ç·¨ç¢¼ä¸¦ç”Ÿæˆ URL
                const encodedPrompt = encodeURIComponent(prompt);
                const imageUrl = `https://image.pollinations.ai/prompt/${encodedPrompt}?width=512&height=512&model=flux&enhance=true`;
                
                console.log('ğŸ”— ç”Ÿæˆçš„åœ–ç‰‡ URL:', imageUrl);
                
                // è¼‰å…¥åœ–ç‰‡
                img.src = imageUrl;
                img.style.display = 'block';
                
                img.onload = function() {
                    console.log('âœ… åœ–ç‰‡è¼‰å…¥æˆåŠŸ');
                    status.innerHTML = '<div class="alert alert-success">âœ… åœ–ç‰‡ç”ŸæˆæˆåŠŸï¼</div>';
                    result.innerHTML = `
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">${input.toUpperCase()}</h5>
                                <p class="card-text">åœ–ç‰‡å·²æˆåŠŸç”Ÿæˆ</p>
                                <a href="${imageUrl}" target="_blank" class="btn btn-outline-primary btn-sm">ğŸ“¥ ä¸‹è¼‰åœ–ç‰‡</a>
                            </div>
                        </div>
                    `;
                };
                
                img.onerror = function() {
                    console.error('âŒ åœ–ç‰‡è¼‰å…¥å¤±æ•—');
                    status.innerHTML = '<div class="alert alert-danger">âŒ åœ–ç‰‡è¼‰å…¥å¤±æ•—ï¼Œè«‹å†è©¦ä¸€æ¬¡</div>';
                };
                
                // è¨­ç½®è¶…æ™‚
                setTimeout(() => {
                    if (img.complete === false) {
                        console.warn('â° åœ–ç‰‡è¼‰å…¥è¶…æ™‚');
                        status.innerHTML = '<div class="alert alert-warning">â° åœ–ç‰‡è¼‰å…¥è¼ƒæ…¢ï¼Œè«‹ç¨å€™...</div>';
                    }
                }, 10000);
                
            } catch (error) {
                console.error('ğŸ’¥ ç™¼ç”ŸéŒ¯èª¤:', error);
                status.innerHTML = '<div class="alert alert-danger">ğŸ’¥ ç™¼ç”ŸéŒ¯èª¤: ' + error.message + '</div>';
            }
        });
        
        // æ¸¬è©¦åŸºæœ¬åŠŸèƒ½
        console.log('ğŸ§ª æ¸¬è©¦åŸºæœ¬åŠŸèƒ½:');
        console.log('- jQuery è¼‰å…¥:', typeof $ !== 'undefined');
        console.log('- Bootstrap è¼‰å…¥:', typeof bootstrap !== 'undefined');
        console.log('- ç€è¦½å™¨:', navigator.userAgent);
        console.log('- è¢å¹•å¯¬åº¦:', window.innerWidth);
    </script>
</body>
</html>
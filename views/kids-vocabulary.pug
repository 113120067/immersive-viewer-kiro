extends layout

block content
  .container-fluid.px-2.px-md-3.mt-2.mt-md-4
    .row.g-2.g-md-3.justify-content-center
      .col-12.col-lg-8.order-2.order-lg-1
        // ä¸»è¦å€åŸŸ
        .card.border-success.shadow.h-100
          .card-header.bg-success.text-white.text-center.py-2.py-md-3
            h3.mb-0.fs-4.fs-md-3
              | ğŸŒŸ å°å­¸ç”Ÿè‹±æ–‡å­¸ç¿’åœ–ç‰‡ç”Ÿæˆå™¨ ğŸŒŸ
            p.mb-0.small.d-none.d-sm-block è¼¸å…¥è‹±æ–‡å–®å­—æˆ–å¥å­ï¼ŒAI å¹«ä½ ç•«åœ–ç‰‡ï¼
          
          .card-body.p-2.p-md-4
            // æ­¡è¿è¨Šæ¯
            .alert.alert-success.text-center.mb-3.mb-md-4#welcomeMessage
              h5.fs-5.fs-md-4
                | ğŸ‘‹ æ­¡è¿å°æœ‹å‹ï¼
              p.mb-2.small.mb-md-2 è¼¸å…¥è‹±æ–‡å–®å­—æˆ–å¥å­ï¼Œæˆ‘æœƒå¹«ä½ ç•«ä¸€å¼µå¯æ„›çš„åœ–ç‰‡ä¾†å­¸ç¿’ï¼
              p.mb-0.small.text-muted âœ¨ å®Œå…¨å…è²»ä½¿ç”¨ï¼Œç„¡éœ€è¨»å†Šç™»å…¥
            
            // ç°¡å–®è¼¸å…¥è¡¨å–®
            form#simpleVocabForm
              .mb-3.mb-md-4
                label.form-label.h6.h5-md(for="wordInput") 
                  | ğŸ”¤ è«‹è¼¸å…¥è‹±æ–‡å–®å­—æˆ–å¥å­ï¼š
                .input-group.input-group-lg
                  input#wordInput.form-control.form-control-lg(
                    type="text" 
                    placeholder="ä¾‹å¦‚ï¼šapple, I am happy..."
                    required
                  )
                  button#generateBtn.btn.btn-success.btn-lg.px-2.px-md-3(type="submit")
                    i.fas.fa-magic.d-none.d-sm-inline
                    span.d-sm-none ğŸ¨
                    span.d-none.d-sm-inline  ç”Ÿæˆåœ–ç‰‡ï¼
                    span.d-sm-none ç”Ÿæˆ
                .form-text.mt-2.small
                  .d-block.d-md-none
                    | ğŸ’¡ apple, dog, smile
                    br
                    | ğŸ’¬ I am happy
                  .d-none.d-md-block
                    | ğŸ’¡ å–®å­—ï¼šapple, dog, smile, house, book
                    br
                    | ğŸ’¬ å¥å­ï¼šI am happy, good morning, I like cats
              
              // ç™¼éŸ³åŠŸèƒ½è¨­å®š
              .row.mt-3.g-2.g-md-3
                .col-12.col-sm-6.col-lg-4
                  .form-check.form-switch
                    input#pronunciationToggle.form-check-input(type="checkbox" checked)
                    label.form-check-label.small(for="pronunciationToggle")
                      | ğŸ”Š è‡ªå‹•ç™¼éŸ³
                      small.text-muted.d-block.d-lg-none åœ–ç‰‡å¾Œè‡ªå‹•æ’­æ”¾
                      small.text-muted.d-none.d-lg-block ç”Ÿæˆåœ–ç‰‡å¾Œè‡ªå‹•æ’­æ”¾å–®å­—ç™¼éŸ³
                
                .col-12.col-sm-6.col-lg-4
                  .form-check.form-switch
                    input#practiceToggle.form-check-input(type="checkbox")
                    label.form-check-label.small(for="practiceToggle")
                      | ğŸ¤ ç·´ç¿’ç™¼éŸ³
                      small.text-muted.d-block.d-lg-none èªéŸ³è­˜åˆ¥ç·´ç¿’
                      small.text-muted.d-none.d-lg-block é–‹å•ŸèªéŸ³è­˜åˆ¥ç·´ç¿’åŠŸèƒ½
                
                .col-12.col-lg-4
                  label.form-label.small(for="speechSpeedSlider")
                    | ğŸµ æ’­æ”¾é€Ÿåº¦
                    span#speedValue.text-muted.ms-1 (æ­£å¸¸)
                  input#speechSpeedSlider.form-range(
                    type="range" 
                    min="0.5" 
                    max="2.0" 
                    step="0.1" 
                    value="0.8"
                  )
                  .d-flex.justify-content-between.small.text-muted
                    span æ…¢
                    span å¿«
              
              // éš±è—çš„é€²éšé¸é …ï¼ˆé è¨­ç‚ºå°å­¸ç”Ÿå‹å–„è¨­ç½®ï¼‰
              input#providerSelect(type="hidden" value="pollinations")
              input#styleSelect(type="hidden" value="cartoon")
              input#levelSelect(type="hidden" value="beginner")
              input#techniqueSelect(type="hidden" value="story")
              input#includeTextCheck(type="hidden" value="true")
            
            // ç”Ÿæˆç‹€æ…‹
            .mt-3.mt-md-4#generationStatus(style="display: none")
              .alert.alert-primary.text-center.py-2.py-md-3
                .spinner-border.spinner-border-sm.text-primary.me-2.me-md-3
                h6.h5-md.d-inline.mb-0
                  | ğŸ¨ æ­£åœ¨ç‚ºä½ ç•«åœ–ç‰‡...
                p.mb-0.small.d-none.d-sm-block è«‹ç¨ç­‰ 10-20 ç§’
            
            // éŒ¯èª¤è¨Šæ¯
            .mt-3#errorMessage(style="display: none")
              .alert.alert-warning.text-center.py-2
                i.fas.fa-exclamation-triangle.me-2
                span#errorText
      
      .col-12.col-lg-4.order-1.order-lg-2
        // çµæœå€åŸŸ
        .card.border-primary.shadow.h-100
          .card-header.bg-primary.text-white.text-center.py-2.py-md-3
            h6.h5-md.mb-0
              | ğŸ–¼ï¸ ä½ çš„åœ–ç‰‡
          .card-body.text-center.p-2.p-md-3
            // åœ–ç‰‡é¡¯ç¤º
            .image-result#imageResult(style="display: none")
              .mb-2.mb-md-3
                img#generatedImage.img-fluid.rounded.shadow(style="max-width: 100%; border: 2px solid #28a745;")
              
              .word-info.bg-light.p-2.p-md-3.rounded.mb-2.mb-md-3
                h5.h4-md.text-success.mb-1#wordTitle å–®å­—
                p.text-muted.mb-2.small#wordMeaning æ„æ€
                
                // ç™¼éŸ³æ§åˆ¶æŒ‰éˆ•
                .pronunciation-controls.mt-2
                  .row.g-1.g-md-2
                    .col-6
                      button#pronounceBtn.btn.btn-primary.btn-sm.w-100.py-1.py-md-2(type="button")
                        i.fas.fa-volume-up.me-1.d-none.d-sm-inline
                        span.d-sm-none ğŸ”Š
                        span.d-none.d-sm-inline ç™¼éŸ³
                    .col-6
                      button#practiceBtn.btn.btn-warning.btn-sm.w-100.py-1.py-md-2(type="button" style="display: none")
                        i.fas.fa-microphone.me-1.d-none.d-sm-inline
                        span.d-sm-none ğŸ¤
                        span.d-none.d-sm-inline ç·´ç¿’
                
                // ç·´ç¿’ç™¼éŸ³çµæœ
                .practice-result.mt-2#practiceResult(style="display: none")
                  .alert.alert-info.small.mb-0.py-1.py-md-2
                    .d-flex.align-items-center
                      .spinner-border.spinner-border-sm.me-2#practiceSpinner(style="display: none")
                      span#practiceText.small é»æ“Šéº¥å…‹é¢¨é–‹å§‹ç·´ç¿’ç™¼éŸ³...
              
              .mb-2.mb-md-3
                small.text-muted#aiProvider 
                  | ğŸ¤– ç”± AI ç”Ÿæˆ
              
              .d-grid
                a#downloadLink.btn.btn-outline-success.btn-sm(download="my-word-image.png")
                  i.fas.fa-download.me-1.me-md-2
                  span.d-none.d-sm-inline ä¸‹è¼‰åœ–ç‰‡
                  span.d-sm-none ä¸‹è¼‰
            
            // ä½”ä½ç¬¦
            .placeholder-content#placeholderContent
              .text-center.text-muted.py-3.py-md-5
                i.fas.fa-image.fa-2x.fa-md-4x.mb-2.mb-md-3.text-light
                h6.h5-md ä½ çš„åœ–ç‰‡æœƒå‡ºç¾åœ¨é€™è£¡
                p.small è¼¸å…¥å–®å­—å¾Œé»æ“Šã€Œç”Ÿæˆåœ–ç‰‡ã€
        
        // æœ€è¿‘çš„å…§å®¹
        .card.mt-2.mt-md-3.border-info
          .card-header.bg-info.text-white.text-center.py-2
            h6.mb-0.small
              | ğŸ“š æœ€è¿‘å­¸éçš„å…§å®¹
          .card-body.p-2.p-md-3
            .small#recentWords
              p.text-muted.text-center.mb-0 é‚„æ²’æœ‰å­¸éçš„å…§å®¹

  // å…’ç«¥å‹å–„éŸ¿æ‡‰å¼æ¨£å¼
  style.
    body {
      background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
      min-height: 100vh;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
    }
    
    .card {
      border-radius: 10px;
      border-width: 2px;
    }
    
    .card-header {
      border-radius: 10px 10px 0 0 !important;
    }
    
    #wordInput {
      border-radius: 20px;
      border: 3px solid #28a745;
      text-align: center;
      font-weight: bold;
      font-size: 18px;
      padding: 12px 16px;
      line-height: 1.4;
    }
    
    #wordInput:focus {
      border-color: #20c997;
      box-shadow: 0 0 0 0.3rem rgba(40, 167, 69, 0.25);
      transform: scale(1.02);
      transition: all 0.2s ease;
    }
    
    #generateBtn {
      border-radius: 20px;
      font-weight: bold;
      min-width: 100px;
      min-height: 50px;
      font-size: 16px;
      padding: 12px 20px;
    }
    
    /* å°æœ‹å‹å°ˆç”¨ - æ‰‹æ©Ÿç‰ˆæ¨£å¼ (< 576px) */
    @media (max-width: 575.98px) {
      body {
        font-size: 16px; /* åŸºç¤å­—é«”åŠ å¤§ */
      }
      
      .container-fluid {
        padding-left: 10px;
        padding-right: 10px;
      }
      
      .card {
        border-radius: 12px;
        border-width: 3px;
      }
      
      .card-header h3 {
        font-size: 1.3rem !important;
        line-height: 1.3;
      }
      
      #wordInput {
        font-size: 20px !important; /* æ‰‹æ©Ÿç‰ˆå­—é«”æ›´å¤§ */
        border-radius: 18px;
        padding: 16px 20px;
        min-height: 56px; /* è§¸æ§å‹å–„é«˜åº¦ */
        border-width: 4px;
      }
      
      #generateBtn {
        border-radius: 18px;
        min-width: 80px;
        min-height: 56px; /* è§¸æ§å‹å–„é«˜åº¦ */
        font-size: 18px;
        font-weight: 700;
        padding: 16px 24px;
      }
      
      .form-check-label {
        font-size: 16px;
        font-weight: 600;
        line-height: 1.4;
      }
      
      .form-check-input {
        width: 1.8em;
        height: 1.8em;
        margin-top: 0.1em;
      }
      
      .btn-sm {
        min-height: 48px !important;
        font-size: 16px !important;
        padding: 12px 16px !important;
      }
      
      .alert h5 {
        font-size: 1.4rem !important;
      }
      
      .alert p {
        font-size: 1rem !important;
      }
      
      .recent-word-item {
        padding: 12px;
        font-size: 16px;
        border-radius: 10px;
        margin-bottom: 10px;
        min-height: 48px;
        display: flex;
        align-items: center;
      }
    }
    
    /* å°æœ‹å‹å°ˆç”¨ - å¹³æ¿ç‰ˆæ¨£å¼ (576px - 991px) */
    @media (min-width: 576px) and (max-width: 991.98px) {
      body {
        font-size: 17px;
      }
      
      .card {
        border-radius: 15px;
        border-width: 3px;
      }
      
      .card-header h3 {
        font-size: 1.5rem !important;
      }
      
      #wordInput {
        font-size: 19px;
        padding: 14px 18px;
        min-height: 52px;
      }
      
      #generateBtn {
        min-height: 52px;
        font-size: 17px;
        padding: 14px 22px;
      }
      
      .form-check-label {
        font-size: 16px;
        font-weight: 500;
      }
      
      .form-check-input {
        width: 1.6em;
        height: 1.6em;
      }
      
      .btn-sm {
        min-height: 44px !important;
        font-size: 15px !important;
      }
      
      .recent-word-item {
        padding: 10px;
        font-size: 15px;
        min-height: 44px;
      }
    }
    
    /* æ¡Œé¢ç‰ˆæ¨£å¼ (â‰¥ 992px) */
    @media (min-width: 992px) {
      .card {
        border-radius: 18px;
      }
      
      #wordInput {
        font-size: 18px;
        border-radius: 25px;
        border-width: 3px;
        padding: 12px 16px;
      }
      
      #generateBtn {
        border-radius: 25px;
        min-width: 120px;
        min-height: 48px;
      }
      
      .form-check-label {
        font-size: 15px;
      }
    }
    
    /* è§¸æ§è¨­å‚™ç‰¹åˆ¥å„ªåŒ– */
    @media (hover: none) and (pointer: coarse) {
      /* æ‰€æœ‰æŒ‰éˆ•åŠ å¤§è§¸æ§å€åŸŸ */
      .btn {
        min-height: 48px;
        padding: 12px 20px;
        font-size: 16px;
      }
      
      .btn-lg {
        min-height: 56px;
        padding: 16px 24px;
        font-size: 18px;
      }
      
      .btn-sm {
        min-height: 44px;
        padding: 10px 16px;
        font-size: 15px;
      }
      
      /* è¡¨å–®æ§åˆ¶é …åŠ å¤§ */
      .form-check-input {
        width: 2em;
        height: 2em;
      }
      
      /* æ»‘æ¡¿åŠ å¤§ */
      #speechSpeedSlider::-webkit-slider-thumb {
        width: 28px;
        height: 28px;
      }
      
      #speechSpeedSlider::-moz-range-thumb {
        width: 28px;
        height: 28px;
      }
      
      /* è¼¸å…¥æ¡†åŠ å¤§ */
      input[type="text"], input[type="range"] {
        min-height: 48px;
      }
    }
    
    #generatedImage {
      transition: transform 0.3s ease;
      max-height: 320px;
      object-fit: contain;
      border-radius: 12px;
    }
    
    #generatedImage:hover {
      transform: scale(1.03);
    }
    
    .placeholder-content {
      border: 3px dashed #28a745;
      border-radius: 15px;
      background: linear-gradient(45deg, #f8f9fa 25%, transparent 25%), 
                  linear-gradient(-45deg, #f8f9fa 25%, transparent 25%), 
                  linear-gradient(45deg, transparent 75%, #f8f9fa 75%), 
                  linear-gradient(-45deg, transparent 75%, #f8f9fa 75%);
      background-size: 18px 18px;
      background-position: 0 0, 0 9px, 9px -9px, -9px 0px;
      min-height: 220px;
    }
    
    .word-info {
      border: 3px solid #28a745;
      border-radius: 12px;
      background: linear-gradient(135deg, #f8fff8 0%, #e8f5e8 100%);
    }
    
    .spinner-border {
      width: 2rem;
      height: 2rem;
    }
    
    .recent-word-item {
      background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
      border: 2px solid #dee2e6;
      border-radius: 10px;
      padding: 10px 12px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 15px;
      font-weight: 500;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .recent-word-item:hover {
      background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      border-color: #28a745;
    }
    
    /* å°æœ‹å‹å°ˆç”¨ - æ‰‹æ©Ÿç‰ˆåœ–ç‰‡æ¨£å¼ */
    @media (max-width: 575.98px) {
      #generatedImage {
        max-height: 280px;
        border-width: 3px !important;
        border-radius: 15px;
      }
      
      .placeholder-content {
        border-width: 4px;
        min-height: 200px;
        background-size: 20px 20px;
        border-radius: 18px;
      }
      
      .word-info {
        border-width: 3px;
        border-radius: 15px;
        padding: 16px !important;
      }
      
      .word-info h5 {
        font-size: 1.4rem !important;
        font-weight: 700;
      }
      
      .word-info p {
        font-size: 1.1rem !important;
        font-weight: 500;
      }
      
      .spinner-border {
        width: 2.5rem;
        height: 2.5rem;
      }
      
      .recent-word-item {
        padding: 14px 16px;
        font-size: 17px;
        border-radius: 12px;
        margin-bottom: 12px;
        border-width: 3px;
        min-height: 56px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
      }
    }
    
    /* å¹³æ¿ç‰ˆåœ–ç‰‡æ¨£å¼ */
    @media (min-width: 576px) and (max-width: 991.98px) {
      #generatedImage {
        max-height: 300px;
        border-radius: 14px;
      }
      
      .placeholder-content {
        min-height: 210px;
        border-radius: 16px;
      }
      
      .word-info {
        border-radius: 14px;
        padding: 14px !important;
      }
      
      .word-info h5 {
        font-size: 1.3rem !important;
      }
      
      .word-info p {
        font-size: 1rem !important;
      }
      
      .recent-word-item {
        padding: 12px 14px;
        font-size: 16px;
        border-radius: 11px;
        min-height: 48px;
      }
    }
    
    /* æ¡Œé¢ç‰ˆåœ–ç‰‡æ¨£å¼ */
    @media (min-width: 992px) {
      #generatedImage {
        max-height: 400px;
        border-radius: 16px;
      }
      
      .placeholder-content {
        border-width: 3px;
        border-radius: 18px;
        background-size: 22px 22px;
        min-height: 300px;
      }
      
      .word-info {
        border-radius: 14px;
      }
      
      .recent-word-item {
        padding: 10px 12px;
        border-radius: 10px;
        font-size: 15px;
        min-height: 44px;
      }
    }
    
    #speechSpeedSlider {
      background: linear-gradient(to right, #28a745 0%, #20c997 50%, #17a2b8 100%);
      height: 6px;
      border-radius: 3px;
      outline: none;
      opacity: 0.8;
      transition: opacity 0.2s;
    }
    
    #speechSpeedSlider:hover {
      opacity: 1;
    }
    
    #speechSpeedSlider::-webkit-slider-thumb {
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #28a745;
      cursor: pointer;
      border: 2px solid white;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }
    
    #speechSpeedSlider::-moz-range-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #28a745;
      cursor: pointer;
      border: 2px solid white;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }
    
    /* æ‰‹æ©Ÿç‰ˆæ»‘æ¡¿æ¨£å¼ */
    @media (max-width: 575.98px) {
      #speechSpeedSlider {
        height: 8px;
      }
      
      #speechSpeedSlider::-webkit-slider-thumb {
        width: 20px;
        height: 20px;
      }
      
      #speechSpeedSlider::-moz-range-thumb {
        width: 20px;
        height: 20px;
      }
    }
    
    /* æ¡Œé¢ç‰ˆæ»‘æ¡¿æ¨£å¼ */
    @media (min-width: 992px) {
      #speechSpeedSlider {
        height: 8px;
        border-radius: 5px;
      }
      
      #speechSpeedSlider::-webkit-slider-thumb {
        width: 20px;
        height: 20px;
      }
      
      #speechSpeedSlider::-moz-range-thumb {
        width: 20px;
        height: 20px;
      }
    }
    
    /* è§¸æ§è¨­å‚™å„ªåŒ– */
    @media (hover: none) and (pointer: coarse) {
      .btn {
        min-height: 44px;
      }
      
      .form-check-input {
        width: 1.5em;
        height: 1.5em;
      }
      
      #speechSpeedSlider::-webkit-slider-thumb {
        width: 24px;
        height: 24px;
      }
      
      #speechSpeedSlider::-moz-range-thumb {
        width: 24px;
        height: 24px;
      }
    }

block scripts
  script(src="/js/kids-vocabulary.js")
  script.
    // é é¢è¼‰å…¥å‹•ç•«
    document.addEventListener('DOMContentLoaded', function() {
      console.log('ğŸŒŸ Kids Vocabulary Generator loaded');
      
      // ç°¡å–®çš„æ­¡è¿å‹•ç•«
      setTimeout(() => {
        const welcome = document.getElementById('welcomeMessage');
        if (welcome) {
          welcome.style.animation = 'pulse 2s infinite';
        }
      }, 1000);
    });
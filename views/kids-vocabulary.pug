extends layout

block content
  .container-fluid.p-0
    .row.g-0.justify-content-center
      .col-12.col-lg-8.order-2.order-lg-1
        // ä¸»è¦è¼¸å…¥å€åŸŸ
        .card.border-success.h-100
          .card-header.bg-success.text-white.text-center.py-2.py-md-3
            h3.mb-0.fs-4.fs-md-3
              | ğŸŒŸ å°å­¸ç”Ÿè‹±æ–‡å­¸ç¿’åœ–ç‰‡ç”Ÿæˆå™¨ ğŸŒŸ
            p.mb-0.small.d-none.d-sm-block è¼¸å…¥è‹±æ–‡å–®å­—æˆ–å¥å­ï¼ŒAI å¹«ä½ ç•«åœ–ç‰‡ï¼
          
          .card-body.p-2.p-md-4
            // æ­¡è¿è¨Šæ¯
            .alert.alert-success.text-center.mb-3.mb-md-4#welcomeMessage
              h5.fs-5.fs-md-4
                | ğŸ‘‹ æ­¡è¿å°æœ‹å‹ï¼
              p.mb-2.small.mb-md-2 è¼¸å…¥è‹±æ–‡å–®å­—æˆ–å¥å­ï¼Œæˆ‘æœƒå¹«ä½ ç•«ä¸€å¼µå¯æ„›çš„åœ–ç‰‡ä¾†å­¸ç¿’ï¼
              p.mb-0.small.text-muted âœ¨ å®Œå…¨å…è²»ä½¿ç”¨ï¼Œç„¡éœ€è¨»å†Šç™»å…¥ ğŸŒ¸ ç”±å…è²» AI ç”Ÿæˆ
            
            // ç°¡å–®è¼¸å…¥è¡¨å–® - ç§»åˆ°æœ€è¿‘å­¸éå…§å®¹ä¹‹å‰
            form#simpleVocabForm
              .mb-3.mb-md-4
                label.form-label.h6.h5-md(for="wordInput") 
                  | ğŸ”¤ è«‹è¼¸å…¥è‹±æ–‡å–®å­—æˆ–å¥å­ï¼š
                
                // æ‰‹æ©Ÿç‰ˆï¼šè¼¸å…¥æ¡†å’ŒæŒ‰éˆ•åˆ†é–‹æ’åˆ—
                .d-block.d-sm-none
                  .position-relative.mb-3
                    input#wordInput.form-control.form-control-lg(
                      type="text" 
                      placeholder="ä¾‹å¦‚ï¼šapple, I am happy..."
                      required
                      spellcheck="true"
                      lang="en"
                      style="padding-right: 40px;"
                    )
                    button.btn.btn-link.text-muted.position-absolute.btn-clear-input(
                      type="button"
                      data-target="wordInput"
                      style="right: 5px; top: 50%; transform: translateY(-50%); text-decoration: none; font-size: 1.2rem;"
                    )
                      i.fas.fa-times-circle
                  
                  .d-grid
                    button#generateBtn.btn.btn-success.btn-lg(
                      type="submit"
                      style="-webkit-appearance: none; -webkit-tap-highlight-color: transparent;"
                      ontouchstart=""
                    )
                      span ğŸ¨ ç”Ÿæˆåœ–ç‰‡ï¼
                
                // å¹³æ¿å’Œæ¡Œé¢ç‰ˆï¼šè¼¸å…¥æ¡†å’ŒæŒ‰éˆ•åœ¨åŒä¸€æ’
                .input-group.input-group-lg.d-none.d-sm-flex
                  input#wordInputDesktop.form-control.form-control-lg(
                    type="text" 
                    placeholder="ä¾‹å¦‚ï¼šapple, I am happy..."
                    required
                    spellcheck="true"
                    lang="en"
                  )
                  button.btn.btn-outline-secondary.border-end-0.border-start-0.btn-clear-input(
                    type="button"
                    data-target="wordInputDesktop"
                    title="æ¸…é™¤å…§å®¹"
                  )
                    i.fas.fa-times
                  button#generateBtnDesktop.btn.btn-success.btn-lg.px-2.px-md-3(
                    type="submit"
                    style="-webkit-appearance: none; -webkit-tap-highlight-color: transparent;"
                    ontouchstart=""
                  )
                    span ğŸ¨ ç”Ÿæˆåœ–ç‰‡ï¼
                
                // å¿«é€Ÿå–®å­—å¡ (Quick Chips)
                .quick-chips-container.mt-3
                  .d-flex.flex-wrap.gap-2.justify-content-center
                    button.btn.btn-outline-primary.btn-sm.rounded-pill.quick-chip(type="button" data-word="apple") ğŸ Apple
                    button.btn.btn-outline-warning.btn-sm.rounded-pill.quick-chip(type="button" data-word="cat") ğŸ± Cat
                    button.btn.btn-outline-info.btn-sm.rounded-pill.quick-chip(type="button" data-word="dog") ğŸ¶ Dog
                    button.btn.btn-outline-success.btn-sm.rounded-pill.quick-chip(type="button" data-word="tree") ğŸŒ³ Tree
                    button.btn.btn-outline-danger.btn-sm.rounded-pill.quick-chip(type="button" data-word="flower") ğŸŒ¸ Flower
                    button.btn.btn-outline-secondary.btn-sm.rounded-pill.quick-chip(type="button" data-word="I am happy") ğŸ˜Š I am happy
                    button.btn.btn-outline-dark.btn-sm.rounded-pill.quick-chip(type="button" data-word="3 little pigs") ğŸ· 3 Little Pigs
              

              
              // éš±è—çš„é€²éšé¸é …ï¼ˆé è¨­ç‚ºå°å­¸ç”Ÿå‹å–„è¨­ç½®ï¼‰
              input#providerSelect(type="hidden" value="pollinations")
              input#styleSelect(type="hidden" value="cartoon")
              input#levelSelect(type="hidden" value="beginner")
              input#techniqueSelect(type="hidden" value="story")
              input#includeTextCheck(type="hidden" value="true")
              // GitHub Storage Config
              if githubOwner && githubRepo
                input#githubOwner(type="hidden" value=githubOwner)
                input#githubRepo(type="hidden" value=githubRepo)
                input#githubPath(type="hidden" value=githubPath)
            
            // æœ€è¿‘å­¸éçš„å…§å®¹ - æ”¾åœ¨è¼¸å…¥è¡¨å–®ä¹‹å¾Œ
            .card.mb-3.mb-md-4.border-info
              .card-header.bg-info.text-white.text-center.py-2
                h6.mb-0.small
                  | ğŸ“š æœ€è¿‘å­¸éçš„å…§å®¹
              .card-body.p-2.p-md-3
                #recentWords
                  p.text-muted.text-center.mb-0.small é‚„æ²’æœ‰å­¸éçš„å…§å®¹
            
            // ç”Ÿæˆç‹€æ…‹
            .mt-3.mt-md-4#generationStatus(style="display: none")
              .alert.alert-primary.text-center.py-2.py-md-3
                .spinner-border.spinner-border-sm.text-primary.me-2.me-md-3
                h6.h5-md.d-inline.mb-0
                  | ğŸ¨ æ­£åœ¨ç‚ºä½ ç•«åœ–ç‰‡...
                p.mb-0.small.d-none.d-sm-block è«‹ç¨ç­‰ 10-20 ç§’
            
            // éŒ¯èª¤è¨Šæ¯
            .mt-3#errorMessage(style="display: none")
              .alert.alert-warning.text-center.py-2
                i.fas.fa-exclamation-triangle.me-2
                span#errorText
      
      .col-12.col-lg-4.order-1.order-lg-2
        // åœ–ç‰‡é¡¯ç¤ºå€åŸŸ
        .card.border-primary
          .card-header.bg-primary.text-white.text-center.py-2.py-md-3.d-none.d-md-block
            h6.h5-md.mb-0
              | ğŸ–¼ï¸ ä½ çš„åœ–ç‰‡
          .card-body.text-center.p-2.p-md-3
            // åœ–ç‰‡é¡¯ç¤º
            .image-result#imageResult(style="display: none")
              .mb-2.mb-md-3.position-relative
                img#generatedImage.img-fluid.rounded.shadow(style="max-width: 100%; border: 2px solid #28a745;")
                
                // æ‡¸æµ®ä¸‹è¼‰æŒ‰éˆ• (æ‰‹æ©Ÿç‰ˆå„ªåŒ–)
                a#downloadLink.btn.btn-light.btn-sm.rounded-circle.shadow.position-absolute(
                  download="my-word-image.png"
                  style="bottom: 10px; right: 10px; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; opacity: 0.9;"
                  title="ä¸‹è¼‰åœ–ç‰‡"
                )
                  i.fas.fa-download.text-success

              .word-info.bg-light.p-2.p-md-3.rounded.mb-0
                .d-flex.justify-content-between.align-items-center.mb-2
                    div
                        h5.h4-md.text-success.mb-0#wordTitle å–®å­—
                        p.text-muted.mb-0.small#wordMeaning æ„æ€
                    div
                        // ç™¼éŸ³æ§åˆ¶æŒ‰éˆ• (ç²¾ç°¡ç‰ˆ)
                        button#pronounceBtn.btn.btn-primary.btn-sm.rounded-circle(type="button" style="width: 36px; height: 36px;")
                             i.fas.fa-volume-up
                
                // ç·´ç¿’æŒ‰éˆ• (å¯¬ç‰ˆ)
                button#practiceBtn.btn.btn-outline-warning.btn-sm.w-100.py-1(type="button" style="display: none")
                    span ğŸ¤ ç·´ç¿’ç™¼éŸ³

                // ç·´ç¿’ç™¼éŸ³çµæœ
                .practice-result.mt-2#practiceResult(style="display: none")
                  .alert.alert-info.small.mb-0.py-1
                    .d-flex.align-items-center
                      .spinner-border.spinner-border-sm.me-2#practiceSpinner(style="display: none")
                      span#practiceText.small é»æ“Šéº¥å…‹é¢¨é–‹å§‹ç·´ç¿’...
              
              .mb-0
                small.text-muted#aiProvider 
            
            // ä½”ä½ç¬¦
            .placeholder-content#placeholderContent
              .text-center.text-muted.py-3
                i.fas.fa-image.fa-2x.mb-2.text-light
                h6 ä½ çš„åœ–ç‰‡æœƒå‡ºç¾åœ¨é€™è£¡
                p.small è¼¸å…¥å–®å­—å¾Œé»æ“Šã€Œç”Ÿæˆåœ–ç‰‡ã€
        

      
      // èªéŸ³åŠŸèƒ½è¨­å®šå€åŸŸ - æ”¾åœ¨æœ€ä¸‹æ–¹
      .col-12.order-3
        .card.mt-1.border-warning
          .card-header.bg-warning.text-dark.text-center.py-2
            h6.mb-0.small
              | ğŸµ èªéŸ³åŠŸèƒ½è¨­å®š
          .card-body.p-2.p-md-3
            .row.g-2.g-md-3
              .col-12.col-sm-6.col-lg-4
                .form-check.form-switch
                  input#pronunciationToggle.form-check-input(type="checkbox" checked)
                  label.form-check-label.small(for="pronunciationToggle")
                    | ğŸ”Š è‡ªå‹•ç™¼éŸ³
                    small.text-muted.d-block.d-lg-none åœ–ç‰‡å¾Œè‡ªå‹•æ’­æ”¾
                    small.text-muted.d-none.d-lg-block ç”Ÿæˆåœ–ç‰‡å¾Œè‡ªå‹•æ’­æ”¾å–®å­—ç™¼éŸ³
              
              .col-12.col-sm-6.col-lg-4
                .form-check.form-switch
                  input#practiceToggle.form-check-input(type="checkbox")
                  label.form-check-label.small(for="practiceToggle")
                    | ğŸ¤ ç·´ç¿’ç™¼éŸ³
                    small.text-muted.d-block.d-lg-none èªéŸ³è­˜åˆ¥ç·´ç¿’
                    small.text-muted.d-none.d-lg-block é–‹å•ŸèªéŸ³è­˜åˆ¥ç·´ç¿’åŠŸèƒ½
              
              .col-12.col-lg-4
                label.form-label.small(for="speechSpeedSlider")
                  | ğŸµ æ’­æ”¾é€Ÿåº¦
                  span#speedValue.text-muted.ms-1 (æ­£å¸¸)
                input#speechSpeedSlider.form-range(
                  type="range" 
                  min="0.5" 
                  max="2.0" 
                  step="0.1" 
                  value="0.8"
                )
                .d-flex.justify-content-between.small.text-muted
                  span æ…¢
                  span å¿«

      // ä½¿ç”¨èªªæ˜æŒ‰éˆ•å€åŸŸ
      .col-12.order-4.mt-3.mb-5.text-center
        button.btn.btn-outline-info.rounded-pill.px-4(type="button" data-bs-toggle="modal" data-bs-target="#usageGuideModal")
          i.fas.fa-question-circle.me-2
          | å¦‚ä½•ä½¿ç”¨ï¼Ÿ(è€å¸«è«‹çœ‹é€™è£¡)

  // ä½¿ç”¨èªªæ˜ Modal
  #usageGuideModal.modal.fade(tabindex="-1" aria-labelledby="usageGuideModalLabel" aria-hidden="true")
    .modal-dialog.modal-dialog-scrollable.modal-lg
      .modal-content.border-0.shadow-lg(style="border-radius: 20px;")
        .modal-header.bg-success.text-white(style="border-radius: 20px 20px 0 0;")
          h5#usageGuideModalLabel.modal-title 
            i.fas.fa-book-reader.me-2
            | å°å­¸ç”Ÿå–®å­—åœ–ç‰‡ç”Ÿæˆå™¨ - ä½¿ç”¨æŒ‡å—
          button.btn-close.btn-close-white(type="button" data-bs-dismiss="modal" aria-label="Close")
        .modal-body.p-4
          .alert.alert-warning.border-warning
            h6.alert-heading.fw-bold 
              i.fas.fa-exclamation-circle.me-2
              | ğŸŒŸ é‡è¦æé†’ï¼š15 ç§’é­”æ³•å†·å»æ™‚é–“
            p.mb-0 ç‚ºäº†è®“å¤§å®¶éƒ½èƒ½é †åˆ©ä½¿ç”¨ï¼ŒAI ç•«åœ–ç²¾éˆæ¯ç•«ä¸€å¼µåœ–éœ€è¦ä¼‘æ¯ **15 ç§’**ã€‚è«‹ç­‰å¾…æŒ‰éˆ•ä¸Šçš„å€’æ•¸çµæŸè®Šå›ç¶ è‰²å¾Œï¼Œå†æŒ‰ä¸‹ä¸€å¼µå–”ï¼

          h6.fw-bold.text-success.mt-4 ğŸ« å­¸æ ¡èª²å ‚ä½¿ç”¨å»ºè­° (çµ¦è€å¸«)
          p ç•¶å…¨ç­ä½¿ç”¨åŒä¸€å€‹ WiFi æ™‚ï¼Œç‚ºäº†é¿å…ã€Œå¡è»Šã€ï¼Œå»ºè­°æ‚¨ï¼š
          ul.text-muted
            li 
              strong ğŸƒ åˆ†çµ„æ¥åŠ›è³½ï¼š
              | è®“ç¬¬ä¸€æ’åŒå­¸å…ˆæŒ‰ï¼Œé 20 ç§’æ›ç¬¬äºŒæ’ï¼Œä»¥æ­¤é¡æ¨ã€‚
            li 
              strong ğŸ“¶ åˆ†æ•£ç¶²è·¯ï¼š
              | å¦‚æœå¯ä»¥ï¼Œéƒ¨åˆ†å¹³æ¿ä½¿ç”¨ WiFiï¼Œéƒ¨åˆ†ä½¿ç”¨è¡Œå‹•ç¶²è·¯ã€‚
            li 
              strong ğŸ› ï¸ é‡åˆ°éŒ¯èª¤æ™‚ï¼š
              | è«‹å°æœ‹å‹ã€Œæš«åœå‹•ä½œï¼Œæ·±å‘¼å¸ã€ï¼Œç­‰å¾…ç´„ 1 åˆ†é˜å¾Œå†è©¦ã€‚

          hr.my-4

          h6.fw-bold.text-primary ğŸ‘¶ çµ¦å°æœ‹å‹çš„å°å®åš€
          ol.text-muted
            li 
              strong è¦æœ‰è€å¿ƒï¼š
              | æŒ‰ä¸‹æŒ‰éˆ•å¾Œï¼Œç­‰å®ƒè½‰åœˆåœˆï¼Œä¸è¦ä¸€ç›´æŒ‰å–”ï¼
            li 
              strong æ’éšŠå®ˆç§©åºï¼š
              | è½è€å¸«çš„æŒ‡æ®ï¼Œè¼ªæµç”Ÿæˆåœ–ç‰‡ã€‚
            li 
              strong ä¼‘æ¯ä¸€ä¸‹ï¼š
              | å¦‚æœç²¾éˆä¸ç†ä½ äº†ï¼Œè®“å¹³æ¿ä¼‘æ¯ä¸€åˆ†é˜å°±æœƒæ¢å¾©ç²¾ç¥å›‰ï¼
              
        .modal-footer.justify-content-center.border-top-0.pb-4
          button.btn.btn-success.rounded-pill.px-5(type="button" data-bs-dismiss="modal") 
            i.fas.fa-check.me-2
            | æˆ‘çŸ¥é“äº†ï¼

  // å…’ç«¥å‹å–„éŸ¿æ‡‰å¼æ¨£å¼
  style.
    body {
      background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
      min-height: 100vh;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
      margin: 0;
      padding: 0;
    }
    
    /* å…¨ç•«é¢å¸ƒå±€ - æ‰‹æ©Ÿå’Œå¹³æ¿ */
    @media (max-width: 991.98px) {
      .container-fluid {
        padding: 0 !important;
        margin: 0 !important;
      }
      
      .row {
        margin: 0 !important;
      }
      
      .col-12 {
        padding: 0 !important;
      }
      
      .card {
        border-radius: 0 !important;
        border-left: none !important;
        border-right: none !important;
        margin-bottom: 0 !important;
      }
      
      .card:first-child {
        border-top: none !important;
      }
      
      .card:last-child {
        border-bottom: none !important;
      }
      
      .card-body {
        padding: 12px !important;
      }
      
      .card-header {
        padding: 8px 12px !important;
        border-radius: 0 !important;
      }
      
      /* èªéŸ³åŠŸèƒ½å€åŸŸç‰¹æ®Šæ¨£å¼ */
      .border-warning {
        border-color: #ffc107 !important;
        border-top: 2px solid #ffc107 !important;
      }
      
      .bg-warning {
        background: linear-gradient(135deg, #ffc107, #ffca2c) !important;
      }
    }
    
    .card {
      border-radius: 10px;
      border-width: 2px;
    }
    
    .card-header {
      border-radius: 10px 10px 0 0 !important;
    }
    
    #wordInput {
      border-radius: 20px;
      border: 3px solid #28a745;
      text-align: center;
      font-weight: bold;
      font-size: 18px;
      padding: 12px 16px;
      line-height: 1.4;
    }
    
    #wordInput:focus {
      border-color: #20c997;
      box-shadow: 0 0 0 0.3rem rgba(40, 167, 69, 0.25);
      transform: scale(1.02);
      transition: all 0.2s ease;
    }
    
    #generateBtn {
      border-radius: 20px;
      font-weight: bold;
      min-width: 100px;
      min-height: 50px;
      font-size: 16px;
      padding: 12px 20px;
    }
    
    /* æ‰‹æ©Ÿç‰ˆå…¨ç•«é¢æ¨£å¼ (< 576px) */
    @media (max-width: 575.98px) {
      body {
        font-size: 16px !important;
      }
      
      .card-header h3 {
        font-size: 1.3rem !important;
        line-height: 1.2;
        margin: 0 !important;
      }
      
      #wordInput {
        font-size: 18px !important;
        border-radius: 8px;
        padding: 14px 16px;
        min-height: 50px;
        border-width: 2px;
        width: 100% !important;
        text-align: center;
        font-weight: 500;
      }
      
      #generateBtn {
        border-radius: 8px;
        width: 100% !important;
        min-height: 50px;
        font-size: 18px;
        font-weight: 700;
        padding: 14px 20px;
        background: linear-gradient(135deg, #28a745, #20c997);
        border: none;
        margin-top: 8px;
      }
      
      .form-check-label {
        font-size: 14px !important;
        font-weight: 500;
        line-height: 1.3;
      }
      
      .form-check-input {
        width: 1.3em !important;
        height: 1.3em !important;
        margin-top: 0.2em !important;
      }
      
      .btn-sm {
        min-height: 38px !important;
        font-size: 13px !important;
        padding: 8px 12px !important;
      }
      
      .alert {
        margin-bottom: 8px !important;
        padding: 8px 12px !important;
      }
      
      .alert h5 {
        font-size: 1.2rem !important;
        margin-bottom: 4px !important;
      }
      
      .alert p {
        font-size: 13px !important;
        margin-bottom: 0 !important;
      }
      
      .recent-word-item {
        padding: 8px 10px !important;
        font-size: 13px !important;
        border-radius: 4px !important;
        margin-bottom: 4px !important;
        min-height: 36px !important;
        border-width: 1px !important;
      }
      
      .recent-word-item .fw-bold {
        font-size: 13px !important;
      }
      
      .recent-word-item small {
        font-size: 10px !important;
      }
      
      /* åœ–ç‰‡å€åŸŸå„ªåŒ– */
      #generatedImage {
        max-height: 250px !important;
        width: 100% !important;
        border-radius: 8px !important;
        border-width: 2px !important;
      }
      
      .word-info {
        padding: 8px 10px !important;
        border-radius: 6px !important;
        border-width: 2px !important;
      }
      
      .word-info h5 {
        font-size: 1.2rem !important;
        margin-bottom: 4px !important;
      }
      
      .word-info p {
        font-size: 12px !important;
        margin-bottom: 0 !important;
      }
    }
    
    /* å¹³æ¿ç‰ˆå…¨ç•«é¢æ¨£å¼ (576px - 991px) */
    @media (min-width: 576px) and (max-width: 991.98px) {
      body {
        font-size: 17px;
      }
      
      .card-header h3 {
        font-size: 1.5rem !important;
        margin: 0 !important;
      }
      
      #wordInputDesktop {
        font-size: 19px;
        padding: 12px 16px;
        min-height: 48px;
        border-radius: 8px;
      }
      
      #generateBtnDesktop {
        min-height: 48px;
        font-size: 17px;
        padding: 12px 20px;
        border-radius: 8px;
      }
      
      .form-check-label {
        font-size: 15px;
        font-weight: 500;
      }
      
      .form-check-input {
        width: 1.4em;
        height: 1.4em;
      }
      
      .btn-sm {
        min-height: 40px !important;
        font-size: 14px !important;
      }
      
      .alert {
        margin-bottom: 10px !important;
        padding: 10px 12px !important;
      }
      
      .recent-word-item {
        padding: 10px 12px;
        font-size: 14px;
        border-radius: 6px;
        min-height: 38px;
        margin-bottom: 6px;
        border-width: 1px !important;
      }
      
      /* åœ–ç‰‡å€åŸŸå„ªåŒ– */
      #generatedImage {
        max-height: 300px !important;
        width: 100% !important;
        border-radius: 8px !important;
      }
      
      .word-info {
        padding: 10px 12px !important;
        border-radius: 6px !important;
      }
      
      .word-info h5 {
        font-size: 1.3rem !important;
      }
      
      .word-info p {
        font-size: 13px !important;
      }
    }
    
    /* æ¡Œé¢ç‰ˆæ¨£å¼ (â‰¥ 992px) */
    @media (min-width: 992px) {
      .card {
        border-radius: 18px;
      }
      
      #wordInput {
        font-size: 18px;
        border-radius: 25px;
        border-width: 3px;
        padding: 12px 16px;
      }
      
      #generateBtn {
        border-radius: 25px;
        min-width: 120px;
        min-height: 48px;
      }
      
      .form-check-label {
        font-size: 15px;
      }
      
      /* èªéŸ³åŠŸèƒ½å€åŸŸæ¡Œé¢ç‰ˆæ¨£å¼ */
      .border-warning {
        border-width: 3px;
        box-shadow: 0 4px 6px rgba(255, 193, 7, 0.2);
      }
    }
    
    /* è§¸æ§è¨­å‚™ç‰¹åˆ¥å„ªåŒ– */
    @media (hover: none) and (pointer: coarse) {
      /* æ‰€æœ‰æŒ‰éˆ•åŠ å¤§è§¸æ§å€åŸŸ */
      .btn {
        min-height: 48px;
        padding: 12px 20px;
        font-size: 16px;
        -webkit-appearance: none;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }
      
      .btn-lg {
        min-height: 56px;
        padding: 16px 24px;
        font-size: 18px;
        -webkit-appearance: none;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }
      
      .btn-sm {
        min-height: 44px;
        padding: 10px 16px;
        font-size: 15px;
        -webkit-appearance: none;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }
      
      /* è¡¨å–®æ§åˆ¶é …åŠ å¤§ */
      .form-check-input {
        width: 2em;
        height: 2em;
      }
      
      /* æ»‘æ¡¿åŠ å¤§ */
      #speechSpeedSlider::-webkit-slider-thumb {
        width: 28px;
        height: 28px;
      }
      
      #speechSpeedSlider::-moz-range-thumb {
        width: 28px;
        height: 28px;
      }
      
      /* è¼¸å…¥æ¡†åŠ å¤§ */
      input[type="text"], input[type="range"] {
        min-height: 48px;
      }
    }
    
    /* iOS Safari ç‰¹å®šå„ªåŒ– */
    @supports (-webkit-touch-callout: none) {
      .btn {
        -webkit-appearance: none;
        -webkit-tap-highlight-color: transparent;
        -webkit-user-select: none;
        touch-action: manipulation;
      }
      
      /* é˜²æ­¢ iOS ç¸®æ”¾ */
      input[type="text"] {
        font-size: 16px !important;
        //- text-align: center; // Remove this because it might conflict with placeholders
      }
      
      /* iOS æŒ‰éˆ•æ¨£å¼é‡ç½® */
      button {
        -webkit-appearance: none;
        border-radius: 0;
      }
    }
    
    /* èªéŸ³åŠŸèƒ½å€åŸŸç‰¹æ®Šæ¨£å¼ */
    .border-warning .card-header {
      background: linear-gradient(135deg, #ffc107, #ffca2c) !important;
      color: #212529 !important;
      font-weight: bold;
    }
    
    .border-warning .card-body {
      background: linear-gradient(135deg, #fff9e6, #fffbf0);
    }
    
    .border-warning .form-check-input:checked {
      background-color: #ffc107;
      border-color: #ffc107;
    }
    
    .border-warning .form-check-input:focus {
      border-color: #ffca2c;
      box-shadow: 0 0 0 0.25rem rgba(255, 193, 7, 0.25);
    }
    
    /* èªéŸ³åŠŸèƒ½å€åŸŸæ‰‹æ©Ÿç‰ˆå„ªåŒ– */
    @media (max-width: 575.98px) {
      .border-warning .card-body {
        padding: 10px 12px !important;
      }
      
      .border-warning .form-check-label {
        font-size: 13px !important;
        line-height: 1.3;
      }
      
      .border-warning .form-check-input {
        width: 1.2em !important;
        height: 1.2em !important;
      }
      
      .border-warning #speechSpeedSlider {
        height: 6px !important;
      }
    }
    
    #generatedImage {
      transition: transform 0.3s ease;
      max-height: 320px;
      object-fit: contain;
      border-radius: 12px;
    }
    
    #generatedImage:hover {
      transform: scale(1.03);
    }
    
    .placeholder-content {
      border: 2px dashed #28a745;
      border-radius: 8px;
      background: linear-gradient(45deg, #f8f9fa 25%, transparent 25%), 
                  linear-gradient(-45deg, #f8f9fa 25%, transparent 25%), 
                  linear-gradient(45deg, transparent 75%, #f8f9fa 75%), 
                  linear-gradient(-45deg, transparent 75%, #f8f9fa 75%);
      background-size: 16px 16px;
      background-position: 0 0, 0 8px, 8px -8px, -8px 0px;
      min-height: 120px;
    }
    
    /* å…¨ç•«é¢æ¨¡å¼ä¸‹çš„ä½”ä½ç¬¦ */
    @media (max-width: 991.98px) {
      .placeholder-content {
        border-radius: 0 !important;
        border-left: none !important;
        border-right: none !important;
        min-height: 100px !important;
      }
    }
    
    .word-info {
      border: 3px solid #28a745;
      border-radius: 12px;
      background: linear-gradient(135deg, #f8fff8 0%, #e8f5e8 100%);
    }
    
    .spinner-border {
      width: 2rem;
      height: 2rem;
    }
    
    .recent-word-item {
      background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 8px 10px;
      margin-bottom: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 13px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    
    .recent-word-item:hover {
      background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
      transform: translateY(-1px);
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      border-color: #28a745;
    }
    
    .recent-word-item .fw-bold {
      font-size: 14px;
      color: #333;
      line-height: 1.2;
    }
    
    .recent-word-item small {
      font-size: 11px;
      line-height: 1.1;
    }
    
    /* æ¡Œé¢ç‰ˆåœ–ç‰‡æ¨£å¼ */
    @media (min-width: 992px) {
      #generatedImage {
        max-height: 400px;
        border-radius: 16px;
      }
      
      .placeholder-content {
        border-width: 3px;
        border-radius: 18px;
        background-size: 22px 22px;
        min-height: 180px;
      }
      
      .word-info {
        border-radius: 14px;
      }
      
      .recent-word-item {
        padding: 10px 12px;
        border-radius: 8px;
        font-size: 14px;
        min-height: 42px;
      }
      
      .recent-word-item .fw-bold {
        font-size: 15px !important;
      }
      
      .recent-word-item small {
        font-size: 12px !important;
      }
    }
    
    #speechSpeedSlider {
      background: linear-gradient(to right, #28a745 0%, #20c997 50%, #17a2b8 100%);
      height: 6px;
      border-radius: 3px;
      outline: none;
      opacity: 0.8;
      transition: opacity 0.2s;
    }
    
    #speechSpeedSlider:hover {
      opacity: 1;
    }
    
    #speechSpeedSlider::-webkit-slider-thumb {
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #28a745;
      cursor: pointer;
      border: 2px solid white;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }
    
    #speechSpeedSlider::-moz-range-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #28a745;
      cursor: pointer;
      border: 2px solid white;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }
    
    /* æ‰‹æ©Ÿç‰ˆæ»‘æ¡¿æ¨£å¼ */
    @media (max-width: 575.98px) {
      #speechSpeedSlider {
        height: 8px;
      }
      
      #speechSpeedSlider::-webkit-slider-thumb {
        width: 20px;
        height: 20px;
      }
      
      #speechSpeedSlider::-moz-range-thumb {
        width: 20px;
        height: 20px;
      }
    }
    
    /* æ¡Œé¢ç‰ˆæ»‘æ¡¿æ¨£å¼ */
    @media (min-width: 992px) {
      #speechSpeedSlider {
        height: 8px;
        border-radius: 5px;
      }
      
      #speechSpeedSlider::-webkit-slider-thumb {
        width: 20px;
        height: 20px;
      }
      
      #speechSpeedSlider::-moz-range-thumb {
        width: 20px;
        height: 20px;
      }
    }
    
    /* è§¸æ§è¨­å‚™å„ªåŒ– */
    @media (hover: none) and (pointer: coarse) {
      .btn {
        min-height: 44px;
      }
      
      .form-check-input {
        width: 1.5em;
        height: 1.5em;
      }
      
      #speechSpeedSlider::-webkit-slider-thumb {
        width: 24px;
        height: 24px;
      }
      
      #speechSpeedSlider::-moz-range-thumb {
        width: 24px;
        height: 24px;
      }
    }
    
    /* æ‰‹æ©Ÿç‰ˆå­—é«”å„ªåŒ– - é©ä¸­å¤§å° */
    @media screen and (max-width: 575.98px) {
      html, body {
        font-size: 16px !important;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', sans-serif !important;
      }
      
      #wordInput {
        font-size: 18px !important;
        min-height: 48px !important;
        padding: 12px 16px !important;
        border-width: 2px !important;
      }
      
      #generateBtn {
        font-size: 16px !important;
        min-height: 48px !important;
        padding: 12px 20px !important;
      }
      
      .card-header h3 {
        font-size: 1.4rem !important;
      }
      
      .form-check-label {
        font-size: 14px !important;
      }
      
      .btn-sm {
        font-size: 14px !important;
        min-height: 40px !important;
      }
      
      .alert h5 {
        font-size: 1.3rem !important;
      }
      
      .alert p {
        font-size: 14px !important;
      }
    }

block scripts
  script(src="/js/mobile-font-fix.js")
  script(src="/js/kids-vocabulary.js")
  script.
    // é é¢è¼‰å…¥å‹•ç•«
    document.addEventListener('DOMContentLoaded', function() {
      // ç°¡å–®çš„æ­¡è¿å‹•ç•«
      setTimeout(() => {
        const welcome = document.getElementById('welcomeMessage');
        if (welcome) {
          welcome.style.animation = 'pulse 2s infinite';
        }
      }, 1000);
    });